import{nativeVlElement,define}from"/node_modules/vl-ui-core/dist/vl-core.min.js";import{vlLinkToolbar}from"/node_modules/vl-ui-textarea/dist/vl-tinymce-link-toolbar.min.js";import"/node_modules/tinymce/tinymce.min.js";export class VlTextarea extends(nativeVlElement(HTMLTextAreaElement)){static get _observedClassAttributes(){return["disabled","block","error","success","focus","rich"]}connectedCallback(){this.classList.add("vl-textarea"),this.hasAttribute("data-vl-rich")&&setTimeout(()=>{this._addBlockAttribute(),this._configureWysiwyg(),setTimeout(()=>{new MutationObserver(()=>{tinymce.editors.forEach(e=>{e.setContent(e.targetElm.value)})}).observe(this,{childList:!0,characterData:!0,subtree:!0})})})}disconnectedCallback(){tinymce.editors.forEach(e=>{e.targetElm===this&&e.remove()})}get _classPrefix(){return"vl-textarea--"}get _wysiwygConfig(){return{target:this,menubar:!1,resize:!0,elementpath:!1,branding:!1,powerpaste_word_import:"clean",powerpaste_html_import:"clean",content_css:"/node_modules/vl-ui-textarea/dist/style.css",verify_html:!1,forced_root_block:"",force_p_newlines:!0,body_class:"vl-typography",toolbar:"undo redo | bold italic underline strikethrough | h1 h2 h3 h4 h5 h6 | vlLink blockquote hr | numlist bullist",plugins:"autolink hr lists advlist link",formats:{bold:{inline:"b"},italic:{inline:"i"},underline:{inline:"u"},strikethrough:{inline:"strike"}},setup:e=>this._registerVlLinkToolbar(e)}}_addBlockAttribute(){this.setAttribute("data-vl-block","")}_configureWysiwyg(){tinyMCE.baseURL="/node_modules/tinymce",tinyMCE.init(this._wysiwygConfig),tinymce.activeEditor.on("focus",()=>tinymce.activeEditor.editorContainer.classList.add("focus")),tinymce.activeEditor.on("blur",()=>tinymce.activeEditor.editorContainer.classList.remove("focus")),tinyMCE.activeEditor.on("change",()=>tinymce.activeEditor.save())}_registerVlLinkToolbar(e){e.ui.registry.addButton("vlLink",vlLinkToolbar)}}define("vl-textarea",VlTextarea,{extends:"textarea"});